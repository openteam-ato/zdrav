<%= simple_form_for resource,
  url: resource.new_record? ? manage_video_messages_path : manage_video_message_path(resource),
  html: { class: 'js-video-message-form', novalidate: true } do |f| %>
  <%= f.input :title, autofocus: true %>
  <%= f.input :target %>
  <%= f.input :name %>
  <%= f.input :email %>
  <%= f.input :phone %>

  <hr />
  <div class="js-file-upload-wrapper">
    <% if f.object.question_source.present? %>
      <p>
        <%= I18n.t "video_message.kind.question_source" %>:
        <%= link_to f.object.question_source.original_filename, resource.question_source.url, target: '_blank' %>
      </p>
    <% else %>
      <%= f.input :question_source, as: :file, input_html: { class: "js-video-file" } %>
      <div class="progress hidden js-progress-bar-wrapper">
        <div class="progress-bar js-progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
      </div>
    <% end %>
  </div>
  <% %w(question_converted answer_source answer_converted).each do |input_name| %>
    <hr />
    <%= render partial: 'file_input', locals: { input_name: input_name, f: f } %>
  <% end %>

  <%= f.submit 'Сохранить', name: nil, class: 'btn btn-primary js-submit' %>
  <%= link_to 'Отмена', resource.new_record? ? collection_path : resource_path(resource), class: 'btn btn-default' %>
  <% unless resource.new_record? %>
    <%= link_to 'Удалить', manage_video_message_set_delete_reason_path(resource), class: 'btn btn-default pull-right' %>
  <% end %>
<% end %>
