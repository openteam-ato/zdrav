class DeclarationSupport < ActiveRecord::Base
  include AASM

  validates :name, :surname, :agreement, presence: true
  validates :email, presence: true, email_format: true

  aasm :state do
    state :created
    state :approved

    event :approve do
      transitions from: :created, to: :approved
    end
  end

  def sender_fullname
    [
      surname,
      name,
      patronymic
    ].compact.join(' ')
  end
end
